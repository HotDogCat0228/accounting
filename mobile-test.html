<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>手機端測試 - 存錢記帳程式</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f0f0f0;
        }
        .test-info { 
            background: white; 
            padding: 20px; 
            border-radius: 10px; 
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
        }
        .offline-button {
            background: #28a745;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h1>📱 手機端測試頁面</h1>
        <p>這個頁面用來測試手機端的修正效果</p>
        
        <h3>✅ 手機端修正項目：</h3>
        <ul>
            <li>🔄 自動檢測手機設備</li>
            <li>📞 使用重定向登入代替彈出視窗</li>
            <li>📱 改善觸控按鈕大小</li>
            <li>💡 自動建議離線模式</li>
            <li>🎯 優化錯誤處理</li>
        </ul>
        
        <h3>🧪 測試步驟：</h3>
        <ol>
            <li>點擊下方按鈕進入主應用程式</li>
            <li>觀察是否自動檢測到手機設備</li>
            <li>嘗試Google登入（可能會重定向）</li>
            <li>如果登入失敗，應該會建議使用離線模式</li>
            <li>離線模式按鈕應該會有脈衝動畫</li>
        </ol>
    </div>
    
    <a href="index.html" class="test-button">🚀 進入主應用程式</a>
    <a href="index.html#offline" class="test-button offline-button">📱 直接使用離線模式</a>
    
    <div class="test-info">
        <h3>📋 如果仍有問題：</h3>
        <p>1. 確保您的瀏覽器支援現代JavaScript功能</p>
        <p>2. 檢查是否有廣告攔截器封鎖了彈出視窗</p>
        <p>3. 嘗試使用離線模式，所有功能都可以正常使用</p>
        <p>4. 清除瀏覽器快取後重新載入</p>
    </div>

    <script>
        // 檢測設備類型
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
            document.body.style.background = '#e8f5e8';
            const info = document.createElement('div');
            info.className = 'test-info';
            info.style.background = '#d4edda';
            info.style.border = '2px solid #28a745';
            info.innerHTML = '<h3>✅ 檢測到手機設備</h3><p>已啟用手機端優化模式</p>';
            document.body.insertBefore(info, document.body.firstChild);
        }
        
        // 如果URL包含#offline，自動跳轉到離線模式
        if (window.location.hash === '#offline') {
            setTimeout(() => {
                window.location.href = 'index.html';
                setTimeout(() => {
                    // 嘗試觸發離線模式
                    const offlineBtn = document.getElementById('offlineBtn');
                    if (offlineBtn) {
                        offlineBtn.click();
                    }
                }, 1000);
            }, 2000);
        }
    </script>
</body>
</html>
